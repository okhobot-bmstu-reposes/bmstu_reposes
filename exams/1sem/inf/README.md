\# Описание задачи



\## Цель работы

Подтвердить навыки работы с ООП С++ и SQL



\## Краткое описание системы

Реализован консольный интерфейс работы с системой, имитирующей интернет-магазин и базой его данных PostgreSQL



\## Используемые технологии

C++, PostgreSQL, libpqxx



\# Архитектура проекта

Классы Admin, Customer и Manager наследуются от класса User, Admin переопределяет виртуальный метод User::viewOrders(), В классе User хранится указатель на объект класса DatabaseConnection для работы с SQL, который задается при инициализации User. Также классы User и Order хранят вектор указателей Order и OrderItem соответственно.

Я не понял, где должен применяться шаблонный тип в DatabaseConnection, поэтому он не был сделан шаблонным.



Код разделен на .hpp и .cpp(где это требуется) файлы.



\# Работа с базой данных

Реализована в соответствие с ТЗ, однако была добавлена функция generateCSVReport для удобной генерации отчета.



\# Умные указатели и STL

Используются std::shared\_ptr для уменьшения объема копируемых данных. В Order::getTotalPrice() используются std::accumulate и лямбда-функция для вычисления суммарной цены заказа.



\# Логика ролей и прав доступа

&nbsp;- Возможности ролей соответсвуют ТЗ

&nbsp;- Основные ограничения накладываются консольным интерфейсом, реализованным на с++, но также присутствуют некоторые проверки в SQL скриптах.



\# Аудит и история изменений

&nbsp;- Таблицы соответствуют ТЗ.

&nbsp;- Автоматическое логирование реализовано за счет триггеров. 

Пример:

\*(entity\_type, entity\_id, operation, changed\_at(date time))\*

(order,1,update,"2026-01-05 22:53:31.811706")

(product,4,update,"2026-01-05 22:32:27.679331")

(product,5,delete,"2026-01-05 22:31:44.397628")



\# Отчёт в формате CSV

В отчете представлены пользователи, их роли, количество сделанных ими заказов, количество потраченных ими средств, изменений статусов заказов и действий, записанных в аудит.

Пример отчета находится по пути reports/audit\_report.csv



\# Сборка и запуск проекта

&nbsp;- Использовался компилятор MVSC 2017

&nbsp;- Для подключения libpqxx использовался vcpkg

&nbsp;- Программа компилируется в папку build/Release

&nbsp;- Путь сохранения csv отчета относительный

&nbsp;- Пример работы программы указан в example\_logs.txt

